<%- contentFor('body') %>

<!-- Conference Landing Page - Single-screen layout for auditorium projection -->
<div class="h-screen w-screen flex flex-col relative">
  <!-- Background with image3.png as stretched background -->
  <div class="absolute inset-0 z-0">
    <img src="/images/image1.png" alt="Background" class="w-full h-full object-cover">
  </div>
  
  <!-- Header Section -->
  <header class="py-4 px-8 flex items-center justify-between relative z-10">
    <div class="flex items-center">
      <!-- Logo/Favicon -->
      <img src="/images/favicon.png" alt="Logo" class="h-16 w-16 mr-4">
      <!-- Institution Name -->
      <h1 class="text-4xl font-bold text-blue-800">Học viện Quân y</h1>
    </div>
    
    <!-- QR Code (Right) -->
    <div class="bg-white p-3 rounded-lg shadow-md">
      <img id="register-qr-code" src="" alt="Registration QR Code" class="h-20 w-20 border border-gray-200 bg-gray-50" style="min-width: 80px;">
    </div>
  </header>
  
  <!-- Main Banner Area - Left aligned, 1/2 width, white text with blue outline -->
  <section class="flex-grow flex items-center px-8 py-6 relative z-10" style="top: -150px;">
    <div class="w-1/2 text-left">
      <h2 class="text-6xl font-bold mb-2 text-white" style="text-shadow: -1px -1px 0 #2563eb, 1px -1px 0 #2563eb, -1px 1px 0 #2563eb, 1px 1px 0 #2563eb, 2px 2px 4px rgba(0,0,0,0.5);">
        <span class="title-line block opacity-0 animate-fade-in-up animation-delay-0s">Ứng dụng chuyển đổi số</span>
        <span class="title-line block opacity-0 animate-fade-in-up animation-delay-1s">trong đào tạo Y Dược</span>
        <span class="title-line block opacity-0 animate-fade-in-up animation-delay-2s">tại Học viện Quân y</span>
      </h2>
    </div>
  </section>
  
  <!-- Bottom Sections Container - for proper positioning -->
  <div class="mt-auto px-8 pb-4 flex justify-between relative z-10">
    <!-- Information Section - 1/3 width, left aligned -->
   
    
    <!-- Speakers Section - 1/2 width, center aligned with sliding animation -->
    <div class="w-1/2 mx-auto overflow-hidden">
      <div class="speakers-slider relative w-full">
        <div class="speakers-track flex transition-transform duration-500 ease-in-out" style="transform: translateX(0);">
          <!-- Speaker 1 -->
          <div class="speaker-slide w-1/3 flex-shrink-0 px-2">
            <div class="text-center">
              <div class="w-24 h-24 rounded-full overflow-hidden mx-auto border-2 border-blue-600">
                <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Speaker 1" class="w-full h-full object-cover">
              </div>
              <p class="text-xl font-bold mt-2 text-white" style="text-shadow: 1px 1px 2px rgba(0,0,0,0.8);">GS. Nguyễn Văn A</p>
              <p class="text-sm text-white" style="text-shadow: 1px 1px 2px rgba(0,0,0,0.8);">Chuyên gia y học cổ truyền</p>
            </div>
          </div>
          
          <!-- Speaker 2 -->
          <div class="speaker-slide w-1/3 flex-shrink-0 px-2">
            <div class="text-center">
              <div class="w-24 h-24 rounded-full overflow-hidden mx-auto border-2 border-blue-600">
                <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="Speaker 2" class="w-full h-full object-cover">
              </div>
              <p class="text-xl font-bold mt-2 text-white" style="text-shadow: 1px 1px 2px rgba(0,0,0,0.8);">PGS.TS. Trần Thị B</p>
              <p class="text-sm text-white" style="text-shadow: 1px 1px 2px rgba(0,0,0,0.8);">Nhà nghiên cứu AI y tế</p>
            </div>
          </div>
          
          <!-- Speaker 3 -->
          <div class="speaker-slide w-1/3 flex-shrink-0 px-2">
            <div class="text-center">
              <div class="w-24 h-24 rounded-full overflow-hidden mx-auto border-2 border-blue-600">
                <img src="https://randomuser.me/api/portraits/men/67.jpg" alt="Speaker 3" class="w-full h-full object-cover">
              </div>
              <p class="text-xl font-bold mt-2 text-white" style="text-shadow: 1px 1px 2px rgba(0,0,0,0.8);">TS. Lê Văn C</p>
              <p class="text-sm text-white" style="text-shadow: 1px 1px 2px rgba(0,0,0,0.8);">Giám đốc dữ liệu y tế</p>
            </div>
          </div>
          
          <!-- Speaker 4 -->
          <div class="speaker-slide w-1/3 flex-shrink-0 px-2">
            <div class="text-center">
              <div class="w-24 h-24 rounded-full overflow-hidden mx-auto border-2 border-blue-600">
                <img src="https://randomuser.me/api/portraits/women/28.jpg" alt="Speaker 4" class="w-full h-full object-cover">
              </div>
              <p class="text-xl font-bold mt-2 text-white" style="text-shadow: 1px 1px 2px rgba(0,0,0,0.8);">PGS.TS. Hoàng Thị D</p>
              <p class="text-sm text-white" style="text-shadow: 1px 1px 2px rgba(0,0,0,0.8);">Chuyên gia dược phẩm</p>
            </div>
          </div>
          
          <!-- Speaker 5 -->
          <div class="speaker-slide w-1/3 flex-shrink-0 px-2">
            <div class="text-center">
              <div class="w-24 h-24 rounded-full overflow-hidden mx-auto border-2 border-blue-600">
                <img src="https://randomuser.me/api/portraits/men/42.jpg" alt="Speaker 5" class="w-full h-full object-cover">
              </div>
              <p class="text-xl font-bold mt-2 text-white" style="text-shadow: 1px 1px 2px rgba(0,0,0,0.8);">GS.TS. Phạm Văn E</p>
              <p class="text-sm text-white" style="text-shadow: 1px 1px 2px rgba(0,0,0,0.8);">Giáo sư đào tạo y khoa</p>
            </div>
          </div>
          
          <!-- Speaker 6 -->
          <div class="speaker-slide w-1/3 flex-shrink-0 px-2">
            <div class="text-center">
              <div class="w-24 h-24 rounded-full overflow-hidden mx-auto border-2 border-blue-600">
                <img src="https://randomuser.me/api/portraits/women/65.jpg" alt="Speaker 6" class="w-full h-full object-cover">
              </div>
              <p class="text-xl font-bold mt-2 text-white" style="text-shadow: 1px 1px 2px rgba(0,0,0,0.8);">TS. Vũ Thị F</p>
              <p class="text-sm text-white" style="text-shadow: 1px 1px 2px rgba(0,0,0,0.8);">Chuyên gia công nghệ số</p>
            </div>
          </div>
          
          <!-- Speaker 7 -->
          <div class="speaker-slide w-1/3 flex-shrink-0 px-2">
            <div class="text-center">
              <div class="w-24 h-24 rounded-full overflow-hidden mx-auto border-2 border-blue-600">
                <img src="https://randomuser.me/api/portraits/men/22.jpg" alt="Speaker 7" class="w-full h-full object-cover">
              </div>
              <p class="text-xl font-bold mt-2 text-white" style="text-shadow: 1px 1px 2px rgba(0,0,0,0.8);">PGS. Trần Văn G</p>
              <p class="text-sm text-white" style="text-shadow: 1px 1px 2px rgba(0,0,0,0.8);">Chuyên gia hệ thống y tế</p>
            </div>
          </div>
        </div>
        
        <!-- Navigation dots -->
        <div class="flex justify-center mt-4">
          <div class="speaker-dot active bg-white w-2 h-2 rounded-full mx-1 cursor-pointer"></div>
          <div class="speaker-dot bg-gray-400 w-2 h-2 rounded-full mx-1 cursor-pointer"></div>
          <div class="speaker-dot bg-gray-400 w-2 h-2 rounded-full mx-1 cursor-pointer"></div>
          <div class="speaker-dot bg-gray-400 w-2 h-2 rounded-full mx-1 cursor-pointer"></div>
          <div class="speaker-dot bg-gray-400 w-2 h-2 rounded-full mx-1 cursor-pointer"></div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Footer -->
  <footer class="border-t border-blue-300 pt-3 text-center relative z-10">
    <p class="text-xl text-white" style="text-shadow: 1px 1px 2px rgba(0,0,0,0.8);">&copy; Học viện Quân y - All rights reserved</p>
  </footer>
</div>

<!-- QR Code Script & Animations -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // QR Code Logic (existing)
    const qrCodeElement = document.getElementById('register-qr-code');
    let qrCodeUrl = '/api/qrcode';
    fetch(qrCodeUrl)
      .then(response => response.json())
      .then(data => {
        if (qrCodeElement) { qrCodeElement.src = data.qrCodeDataUrl; }
      })
      .catch(error => { console.error('Error fetching QR code:', error); });

    // Title Animation Logic
    const titleLines = document.querySelectorAll('.title-line');
    function runTitleAnimation() {
      titleLines.forEach(line => {
        line.classList.remove('animate-fade-in-up');
        line.style.opacity = '0'; // Reset opacity
        // Force reflow to restart animation
        void line.offsetWidth;
        // Add animation class back
        line.classList.add('animate-fade-in-up');
      });
    }
    // Initial run
    runTitleAnimation(); 
    // Repeat every 30 seconds
    setInterval(runTitleAnimation, 10000);

    // Speakers slider functionality (Updated Interval)
    const speakersTrack = document.querySelector('.speakers-track');
    const speakerSlides = document.querySelectorAll('.speaker-slide');
    const speakerDots = document.querySelectorAll('.speaker-dot');
    const slideWidth = 100 / 3; 
    const totalSlides = speakerSlides.length;
    const visibleSlides = 3;
    const maxPosition = totalSlides > visibleSlides ? totalSlides - visibleSlides : 0;
    let currentPosition = 0;
    let slidingInterval = null; // Initialize interval variable

    function updateSliderPosition() {
      if (!speakersTrack) return; // Add null check
      speakersTrack.style.transform = `translateX(-${currentPosition * slideWidth}%)`;
      
      speakerDots.forEach((dot, index) => {
        if (index === currentPosition) {
          dot.classList.add('active', 'bg-white');
          dot.classList.remove('bg-gray-400');
        } else {
          dot.classList.remove('active', 'bg-white');
          dot.classList.add('bg-gray-400');
        }
      });
    }

    function startSliding() {
      // Clear existing interval before starting a new one
      if (slidingInterval) clearInterval(slidingInterval);
      
      if (totalSlides > visibleSlides) {
         slidingInterval = setInterval(() => {
          currentPosition = (currentPosition + 1) % (maxPosition + 1);
          updateSliderPosition();
        }, 5000); // Updated interval to 5 seconds
      }
    }

    // Initial setup
    if (totalSlides > visibleSlides) {
        speakerDots.forEach((dot, index) => {
            dot.addEventListener('click', () => {
                currentPosition = index;
                updateSliderPosition();
                // Restart the interval after manual click
                startSliding(); 
            });
        });
        startSliding(); // Start the automatic sliding
    } else {
        // Hide or disable dots if not enough slides
        document.querySelector('.flex.justify-center.mt-4').style.display = 'none'; 
    }
    
  });
</script> 